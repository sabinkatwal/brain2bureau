import{r as c,j as t}from"./index-IFymLqrV.js";function v({onNavigate:d}){const[l,r]=c.useState(()=>{try{return JSON.parse(localStorage.getItem("news")||"[]")}catch{return[]}}),[a,i]=c.useState(null),[s,o]=c.useState({title:"",body:""});c.useEffect(()=>{const e=()=>r(JSON.parse(localStorage.getItem("news")||"[]"));return window.addEventListener("storage",e),window.addEventListener("newsChanged",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("newsChanged",e)}},[]);const m=e=>{localStorage.setItem("news",JSON.stringify(e));try{window.dispatchEvent(new Event("newsChanged"))}catch{}r(e)},w=()=>{i("new"),o({title:"",body:""})},u=e=>{i(e),o(l[e])},h=e=>{if(!confirm("Delete this news item?"))return;const n=l.slice();n.splice(e,1),m(n)},x=()=>{const e=l.slice();a==="new"?e.unshift({title:s.title||"Untitled",body:s.body||"",time:Date.now()}):e[a]={...e[a],title:s.title,body:s.body,time:Date.now()},m(e),i(null)};return t.jsxs("div",{className:"news-manager",children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h2",{children:"News Manager"}),t.jsxs("div",{children:[t.jsx("button",{className:"small-button",onClick:w,children:"Add News"}),t.jsx("button",{className:"back-button",onClick:()=>d&&d("home"),style:{marginLeft:8},children:"Back"})]})]}),t.jsxs("div",{className:"news-list-manager",children:[a&&t.jsxs("div",{className:"news-edit",children:[t.jsx("input",{placeholder:"Title",value:s.title,onChange:e=>o({...s,title:e.target.value})}),t.jsx("textarea",{placeholder:"Body",value:s.body,onChange:e=>o({...s,body:e.target.value})}),t.jsxs("div",{style:{marginTop:8},children:[t.jsx("button",{className:"small-button",onClick:x,children:"Save"}),t.jsx("button",{className:"small-button",onClick:()=>i(null),style:{marginLeft:8},children:"Cancel"})]})]}),l.length===0&&t.jsx("div",{className:"muted",children:"No news items yet."}),l.map((e,n)=>t.jsxs("div",{className:"news-manager-item",children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{className:"news-title",children:e.title}),t.jsx("div",{className:"news-meta muted",children:new Date(e.time).toLocaleString()}),t.jsx("div",{className:"news-body",style:{marginTop:6},children:e.body})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,marginLeft:12},children:[t.jsx("button",{className:"small-button",onClick:()=>u(n),children:"Edit"}),t.jsx("button",{className:"small-button",onClick:()=>h(n),children:"Delete"})]})]},n))]})]})}export{v as default};
